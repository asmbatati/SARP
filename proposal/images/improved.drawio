<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" version="29.3.8">
  <diagram name="Detailed-Cognitive-Mediator-v3" id="v3-arch">
    <mxGraphModel grid="1" page="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" pageScale="1" pageWidth="1169" pageHeight="1654" math="1" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="t1_swim" parent="1" style="swimlane;whiteSpace=wrap;html=1;startSize=23;fillColor=#f5f5f5;" value="TIER 1: SEMANTIC INTENT &amp; GROUNDING LAYER" vertex="1">
          <mxGeometry height="240" width="1000" x="60" y="40" as="geometry" />
        </mxCell>
        <mxCell id="t1_1" parent="t1_swim" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#dae8fc;" value="&lt;b&gt;Human Input Interface&lt;/b&gt;&lt;br&gt;Natural Language / Vision / Audio" vertex="1">
          <mxGeometry height="60" width="220" x="30" y="50" as="geometry" />
        </mxCell>
        <mxCell id="t1_2" parent="t1_swim" style="rounded=1;whiteSpace=wrap;html=1;" value="&lt;b&gt;LLM/VLM Semantic Parser&lt;/b&gt;&lt;br&gt;Entity Extraction &amp; Intent Classification" vertex="1">
          <mxGeometry height="60" width="220" x="310" y="50" as="geometry" />
        </mxCell>
        <mxCell id="t1_3" parent="t1_swim" style="rounded=1;whiteSpace=wrap;html=1;" value="&lt;b&gt;Spatial Grounding Engine&lt;/b&gt;&lt;br&gt;Map Symbols to XYZ / Scene Graph Nodes" vertex="1">
          <mxGeometry height="60" width="220" x="580" y="50" as="geometry" />
        </mxCell>
        <mxCell id="t1_4" parent="t1_swim" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;" value="Is Intent&lt;br&gt;Disambiguated?" vertex="1">
          <mxGeometry height="80" width="120" x="840" y="40" as="geometry" />
        </mxCell>
        <mxCell id="t1_5" parent="t1_swim" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingLeft=5;" value="&lt;b&gt;Formal Mission Specification&lt;/b&gt;&lt;br&gt;Output: JSON/YAML/PDDL Goal" vertex="1">
          <mxGeometry height="70" width="240" x="380" y="140" as="geometry" />
        </mxCell>
        <mxCell id="t2_swim" parent="1" style="swimlane;whiteSpace=wrap;html=1;startSize=23;fillColor=#fff2cc;" value="TIER 2: COGNITIVE ORCHESTRATION &amp; STRATEGIC REASONING" vertex="1">
          <mxGeometry height="320" width="1000" x="60" y="310" as="geometry" />
        </mxCell>
        <mxCell id="t2_1" parent="t2_swim" style="rounded=1;whiteSpace=wrap;html=1;" value="&lt;b&gt;Hierarchical Task Planner (HTN)&lt;/b&gt;&lt;br&gt;Global Sequence Decomposition" vertex="1">
          <mxGeometry height="70" width="240" x="40" y="60" as="geometry" />
        </mxCell>
        <mxCell id="t2_2" parent="t2_swim" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;" value="&lt;b&gt;Formal Verifier / SMT Solver&lt;/b&gt;&lt;br&gt;Logical Consistency &amp; Safety Check" vertex="1">
          <mxGeometry height="70" width="240" x="360" y="60" as="geometry" />
        </mxCell>
        <mxCell id="t2_3" parent="t2_swim" style="rounded=1;whiteSpace=wrap;html=1;" value="&lt;b&gt;Temporal Logic Monitor&lt;/b&gt;&lt;br&gt;Check vs. Time &amp; Event Constraints" vertex="1">
          <mxGeometry height="70" width="240" x="680" y="60" as="geometry" />
        </mxCell>
        <mxCell id="t2_4" parent="t2_swim" style="rounded=1;whiteSpace=wrap;html=1;" value="&lt;b&gt;Dynamic Re-Planner&lt;/b&gt;&lt;br&gt;Heuristic-based Recovery Logic" vertex="1">
          <mxGeometry height="70" width="240" x="360" y="210" as="geometry" />
        </mxCell>
        <mxCell id="t2_hitl" parent="t2_swim" style="rhombus;whiteSpace=wrap;html=1;fillColor=#d5e8d4;" value="User Plan&lt;br&gt;Validation Gate" vertex="1">
          <mxGeometry height="110" width="160" x="80" y="190" as="geometry" />
        </mxCell>
        <mxCell id="t3_swim" parent="1" style="swimlane;whiteSpace=wrap;html=1;startSize=23;fillColor=#e1d5e7;" value="TIER 3: TASK DECOMPOSITION &amp; AGENT-TOOL MEDIATION (MCP LAYER)" vertex="1">
          <mxGeometry height="380" width="1000" x="60" y="660" as="geometry" />
        </mxCell>
        <mxCell id="t3_1" parent="t3_swim" style="rounded=0;whiteSpace=wrap;html=1;" value="&lt;b&gt;Task-to-Tool Transformer&lt;/b&gt;&lt;br&gt;Decompose HTN into Tool Invocations" vertex="1">
          <mxGeometry height="70" width="240" x="40" y="95" as="geometry" />
        </mxCell>
        <mxCell id="t3_tools" parent="t3_swim" style="swimlane;whiteSpace=wrap;html=1;startSize=23;" value="&lt;b&gt;Atomic Toolset (Specialized Agents)&lt;/b&gt;" vertex="1">
          <mxGeometry height="160" width="640" x="320" y="50" as="geometry" />
        </mxCell>
        <mxCell id="tool_a" parent="t3_tools" style="rounded=0;whiteSpace=wrap;html=1;" value="&lt;b&gt;Perception Agent&lt;/b&gt;&lt;br&gt;SLAM/VIO/Semantics" vertex="1">
          <mxGeometry height="80" width="130" x="20" y="50" as="geometry" />
        </mxCell>
        <mxCell id="tool_b" parent="t3_tools" style="rounded=0;whiteSpace=wrap;html=1;" value="&lt;b&gt;Motion Agent&lt;/b&gt;&lt;br&gt;Path/Trajectory Plan" vertex="1">
          <mxGeometry height="80" width="130" x="175" y="50" as="geometry" />
        </mxCell>
        <mxCell id="tool_c" parent="t3_tools" style="rounded=0;whiteSpace=wrap;html=1;" value="&lt;b&gt;Manipulation Agent&lt;/b&gt;&lt;br&gt;IK/Grasp Analysis" vertex="1">
          <mxGeometry height="80" width="130" x="330" y="50" as="geometry" />
        </mxCell>
        <mxCell id="tool_d" parent="t3_tools" style="rounded=0;whiteSpace=wrap;html=1;" value="&lt;b&gt;Diagnostic Agent&lt;/b&gt;&lt;br&gt;Health/Battery/Signal" vertex="1">
          <mxGeometry height="80" width="130" x="485" y="50" as="geometry" />
        </mxCell>
        <mxCell id="t3_alloc" parent="t3_swim" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;" value="&lt;b&gt;Optimal Task Dispatcher&lt;/b&gt;&lt;br&gt;Matching Tool Output to Agent URDF/Skills" vertex="1">
          <mxGeometry height="70" width="300" x="350" y="270" as="geometry" />
        </mxCell>
        <mxCell id="t4_swim" parent="1" style="swimlane;whiteSpace=wrap;html=1;startSize=23;fillColor=#dae8fc;" value="TIER 4: HETEROGENEOUS MIDDLEWARE &amp; HARDWARE ABSTRACTION LAYER (HAL)" vertex="1">
          <mxGeometry height="300" width="1000" x="60" y="1080" as="geometry" />
        </mxCell>
        <mxCell id="t4_1" parent="t4_swim" style="rounded=1;whiteSpace=wrap;html=1;" value="&lt;b&gt;Universal Robot Interface (URI)&lt;/b&gt;&lt;br&gt;High-Level API Endpoint" vertex="1">
          <mxGeometry height="60" width="300" x="350" y="45" as="geometry" />
        </mxCell>
        <mxCell id="t4_hal" parent="t4_swim" style="swimlane;whiteSpace=wrap;html=1;startSize=23;" value="&lt;b&gt;Protocol Adapters (Middleware Bridges)&lt;/b&gt;" vertex="1">
          <mxGeometry height="130" width="900" x="50" y="140" as="geometry" />
        </mxCell>
        <mxCell id="p_ros2" parent="t4_hal" style="rounded=0;whiteSpace=wrap;html=1;" value="&lt;b&gt;ROS 2 Bridge&lt;/b&gt;&lt;br&gt;DDS / Topics / Actions" vertex="1">
          <mxGeometry height="65" width="150" x="30" y="45" as="geometry" />
        </mxCell>
        <mxCell id="p_ros1" parent="t4_hal" style="rounded=0;whiteSpace=wrap;html=1;" value="&lt;b&gt;ROS 1 Bridge&lt;/b&gt;&lt;br&gt;Master-Client / TCP" vertex="1">
          <mxGeometry height="65" width="150" x="210" y="45" as="geometry" />
        </mxCell>
        <mxCell id="p_grpc" parent="t4_hal" style="rounded=0;whiteSpace=wrap;html=1;" value="&lt;b&gt;gRPC Adapter&lt;/b&gt;&lt;br&gt;ProtoBuf / Streaming" vertex="1">
          <mxGeometry height="65" width="150" x="390" y="45" as="geometry" />
        </mxCell>
        <mxCell id="p_mav" parent="t4_hal" style="rounded=0;whiteSpace=wrap;html=1;" value="&lt;b&gt;MAVLink Bridge&lt;/b&gt;&lt;br&gt;Drone Control" vertex="1">
          <mxGeometry height="65" width="150" x="570" y="45" as="geometry" />
        </mxCell>
        <mxCell id="p_micro" parent="t4_hal" style="rounded=0;whiteSpace=wrap;html=1;" value="&lt;b&gt;Micro-ROS&lt;/b&gt;&lt;br&gt;Embedded MCU" vertex="1">
          <mxGeometry height="65" width="130" x="740" y="45" as="geometry" />
        </mxCell>
        <mxCell id="kb_box" parent="1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;spacingLeft=10;" value="&lt;b&gt;UNIFIED KNOWLEDGE BASE (Robots-DATA)&lt;/b&gt;&lt;hr&gt;- Skill Ontology (TTL/OWL)&lt;br&gt;- Scene Graph (3D Entities)&lt;br&gt;- URDF/Kinematic Models&lt;br&gt;- Real-time Telemetry Graph" vertex="1">
          <mxGeometry height="250" width="220" x="1090" y="345" as="geometry" />
        </mxCell>
        <mxCell id="conn1" edge="1" parent="1" source="t1_1" target="t1_2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn2" edge="1" parent="1" source="t1_2" target="t1_3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn3" edge="1" parent="1" source="t1_3" target="t1_4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn4" edge="1" parent="1" source="t1_4" style="edgeStyle=orthogonalEdgeStyle;entryX=0;entryY=0;entryDx=240;entryDy=42;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" target="t1_5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn5" edge="1" parent="1" source="t1_5" style="edgeStyle=orthogonalEdgeStyle;" target="t2_1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn6" edge="1" parent="1" source="t2_1" target="t2_2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn7" edge="1" parent="1" source="t2_2" target="t2_3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn8" edge="1" parent="1" source="t2_3" style="edgeStyle=orthogonalEdgeStyle;" target="t2_hitl">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="860" y="460" />
              <mxPoint x="220" y="460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="conn9" edge="1" parent="1" source="t2_hitl" target="t3_1" value="Approve">
          <mxGeometry relative="1" x="-0.4483" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="conn10" edge="1" parent="1" source="t3_1" target="t3_tools">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn11" edge="1" parent="1" source="t3_tools" style="edgeStyle=orthogonalEdgeStyle;" target="t3_alloc">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn12" edge="1" parent="1" source="t3_alloc" target="t4_1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fb1" edge="1" parent="1" source="t4_hal" style="edgeStyle=orthogonalEdgeStyle;" target="kb_box" value="Telemetry Sync">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fb2" edge="1" parent="1" source="kb_box" style="edgeStyle=orthogonalEdgeStyle;" target="t2_4" value="Context Update">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
